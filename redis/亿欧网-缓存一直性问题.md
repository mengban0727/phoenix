## 背景

分析师在亿欧同学后台发布文章后，在前台亿欧网上能进行查看，访问亿欧网的文章时，我们对每个页面的热点数据，文章快讯等详情相关部分加了缓存，采用了cache-aside模式，先查缓存，缓存查询不到时，再查询数据库将结果缓存在redis中，并设置了过期时间。这时，分析师在亿欧同学后台更改文章后，亿欧网展示给用户查看的还是原来的旧数据，如何解决？

## 上报表和消息队列

数据部门有maxwell监听binlog事件，会将变更都写入到上报表中，亿欧网有定时任务，读取上报表中文章的数据，同步到阿里云的开放搜索中，然后删除同步完成的数据。在任务中删除对应文章变更的缓存

除了数据部门，开发部门也部署了canal将binlog日志写入到mq消息队列中，消费端也会同步数据到es中，在此处也可以根据id删除缓存。